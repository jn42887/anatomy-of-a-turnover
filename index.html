<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predicting Turnovers: A Visual Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            background-image: linear-gradient(to bottom, #000000, #1a1a1a);
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #E5E7EB;
        }
        .container {
            max-width: 1200px;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .kpi {
            font-weight: 900;
            font-size: 4rem;
            line-height: 1;
            color: #860038; /* True Gold */
        }
        h1, h2, h3 {
            font-family: 'Bebas Neue', sans-serif;
            color: #860038; /* Wine */
        }
        .visual {
            text-align: center;
            margin-bottom: 40px;
        }
        .visual img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .chart-caption {
            font-size: 0.9em;
            color: #777;
            margin-top: 10px;
        }
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.6s ease;
            opacity: 0;
            transform: translateY(20px);
        }
        .card.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12 flex flex-col items-center">
            <h1 class="text-4xl md:text-6xl font-black mb-2">Predicting Turnovers</h1>
            <p class="text-lg md:text-xl text-gray-300">A league-wide analysis of how possessions are lost in the NBA, and how to predict them using a model.</p>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 gap-8">

            <div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6 flex flex-col md:flex-row items-center card">
                <div class="w-full md:w-1/2 text-center md:text-left pr-0 md:pr-8">
                    <h2 class="text-3xl font-bold text-[#000000] mb-4">The Primary Causes</h2>
                    <p class="text-gray-600 mb-4">
                        The vast majority of turnovers stem from just two fundamental types of errors: <b>bad passes</b> and <b>losing control of the ball</b>. Together, they form the overwhelming bulk of turnovers across the league, highlighting the importance of ball-handling and passing accuracy/decision-making.
                    </p>
                    <div class="bg-[#FDB927] text-[#000000] p-6 rounded-lg shadow-md">
                        <span class="kpi">77%</span>
                        <p class="text-xl font-semibold">of all turnovers are either a bad pass or a lost ball. 47% are from passing, while 30% are losing the dribble.</p>
                    </div>
                </div>
                <div class="w-full md:w-1/2 mt-8 md:mt-0">
                    <div class="chart-container h-[250px] md:h-[300px]">
                        <canvas id="turnoverCompositionChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">Turnover Frequency by Play Type</h2>
                <p class="text-gray-600 mb-6">
                    Isolations are the best way to avoid turnovers. Every other play type has a similar turnover rate. This helps explain why, when excluding butter possessions, isolations were more efficient in 2024-25 than picks or hand-offs despite producing a worse shot quality.
                </p>
                <div class="chart-container h-[350px] md:h-[400px]">
                    <canvas id="playChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">Turnover Frequency by Pick-and-Roll Defensive Coverage</h2>
                <p class="text-gray-600 mb-6">
                    More aggressive defensive pick-and-roll coverages such as blitzes and shows force more turnovers, while switching forces the fewest.
                </p>
                <div class="chart-container h-[350px] md:h-[400px]">
                    <canvas id="pickCoverageChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">Turnover Frequency by Number of Weakside Defenders</h2>
                <p class="text-gray-600 mb-6">
                    The more defenders that are available on the weakside of the screen to help, the more likely the offense is to turn the ball over. Offenses are also most efficient overall in P&R with zero help on the weakside. 
                </p>
                <div class="chart-container h-[350px] md:h-[400px]">
                    <canvas id="weaksideChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">Turnover Type Breakdown by Play Type</h2>
                <p class="text-gray-600 mb-6">
                    One-on-one plays (isos and post-ups) feature much fewer passing turnovers relative to other types.
                </p>
                <div class="chart-container h-[350px] md:h-[400px]">
                    <canvas id="playBreakdownChart"></canvas>
                </div>
            </div>

            <div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">Fouls vs Forced Turnovers</h2>
                <p class="text-gray-600 mb-6">
                    There is a strong, positive correlation between how often teams foul on defense and how many turnovers they force. However, in general, the math is in favor of a more aggressive style. Last season we did not foul often (8th lowest foul rate), and our forced turnover rate was around average (14th).
                </p>
                <div class="flex flex-col items-center">
                    <img src="Foul vs Turnovers.png" alt="2024-25 NBA Defensive Foul Rate vs Forced Turnovers">
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">Hotspots on the Court</h2>
                <p class="text-gray-600 mb-6">
                    Two-thirds of turnovers occur inside the three-point line, either in the paint or the midrange area.
                </p>
                <div class="chart-container h-[350px] md:h-[400px]">
                    <canvas id="regionChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">The Flow of Turnovers</h2>
                <p class="text-gray-600 mb-6">
                    Turnovers occur relatively consistently throughout quarters, with a very slight trend upwards as the period progresses.
                </p>
                <div class="chart-container h-[350px] md:h-[400px]">
                    <canvas id="timingChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">Turnovers by Period</h2>
                <p class="text-gray-600 mb-6">
                    Turnovers occur relatively evenly throughout the game. They are slightly most common in the 2nd quarter, and least common in the 4th.
                </p>
                <div class="chart-container h-[350px] md:h-[400px]">
                    <canvas id="periodChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">Turnover Type Breakdown by Region</h2>
                <p class="text-gray-600 mb-6">
                    The closer players get to the basket, the more likely their turnover will come from a dribbling mistake rather than a passing one. Outside of the paint, passing turnovers are TWICE as frequent as dribbling ones. But in the paint, lost ball turnovers happen more often.
                </p>
                <div class="chart-container h-[350px] md:h-[400px]">
                    <canvas id="regionTypeChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">Turnover Rate by Position</h2>
                <p class="text-gray-600 mb-6">
                    Per touch, each position turns the ball over at roughly the same rate.
                </p>
                <div class="chart-container h-[350px] md:h-[400px]">
                    <canvas id="positionChart"></canvas>
                </div>
            </div>

            <div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">Creating a Turnover Probability Model</h2>
                <p class="text-gray-600 mb-6">
                    Using the trends discovered above, we can create a turnover probabiltiy model similar to how we use shot quality models. The visual below shows the most important factors in calculating turnover probability at the chance level, with the stats in red indicating an increased likelihood of a turnover, and the stats in gold indicating a decreased likelihood. This model is player-adjusted, meaning that it accounts for the turnover/steal rates of every player with a touch or defending a touch.
                </p>
                <p class="text-gray-600 mb-6">
                    The analysis shows that the model is a very different tool depending on which side of the court you're evaluating. The model is very effective at capturing and quantifying a defense's identity. The expected turnover rate for a defense is a consistent and reliable metric over the course of a season, making the model an excellent tool for tracking our long-term defensive strategy and how we're doing at forcing turnovers.


                </p>
                <p class="text-gray-600 mb-6">
                    However, when it comes to our offense, the model's predictive power is much more limited. Because offensive turnovers are often a result of unpredictable, chaotic events, the model's game-by-game predictions don't correlate strongly with our actual turnover rate. This doesn't mean the model is broken, but that it's less useful for predicting randomness. Its value here is to confirm that we should trust our offensive process and not overreact to a single high-turnover game.
                </p>
                <p class="text-gray-600 mb-6">
                    Interestingly, we were the most accurate among NBA teams in terms of the model being able to predict our offensive turnover rate. This means our players did a good job of controllling that offensive chaos relative to other teams. However, our turnover rate is overall mostly still unpredictable when compared to forcing TOV's on the other end of the court.
                </p>
                <div class="chart-container h-[350px] md:h-[400px]">
                    <canvas id="regressionChart"></canvas>
                </div>
            </div>

            <div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">NBA Defensive Turnover Rates vs Expected</h2>
                <p class="text-gray-600 mb-6">
                    This chart shows how each team's defense performs in forcing turnovers relative to what's expected. One downside of our more conservative and switch-heavy style of defense is a low expected forced turnover rate (3rd lowest expected). Our players did a relatively good job of forcing turnovers given the style of play, but we still ranked just 14th in forced turnover rate.
                </p>
                <div class="flex flex-col items-center">
                    <img src="defense_turnovers.png" alt="2024-25 NBA Defensive Forced Turnover Rates: Actual vs. Expected">
                    <p class="chart-caption">Teams above the dotted line have better than expected forced turnover rates. Teams below are worse.</p>
                </div>
            </div>

            <div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6 card">
                <h2 class="text-2xl font-bold text-[#000000] mb-4">NBA Offensive Turnover Rates vs Expected</h2>
                <p class="text-gray-600 mb-6">
                    This chart visualizes how each team's offensive turnover rate compares to their expected rate.
                    The Cavs' play style in 2024-25 was expected to lead to an above average amount of turnovers (9th most expected), but our players were very good at taking care of the ball, leading to the third lowest actual turnover rate in the league.
                </p>
                <div class="flex flex-col items-center">
                    <img src="offense_turnovers.png" alt="2024-25 NBA Offensive Turnover Rates: Actual vs. Expected">
                    <p class="chart-caption">Teams above the dotted line have worse than expected turnover rates. Teams below are better.</p>
                </div>
            </div>

<div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6 card">
    <h2 class="text-2xl font-bold text-[#000000] mb-4">Defensive Recommendations for Forcing More Turnovers</h2>
    <p class="text-gray-600 mb-6">Based on the above analysis, here are the strategic changes we could make to force more turnovers.</p>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        
        <div class="bg-gray-50 rounded-lg shadow-md p-5 card flex flex-col items-center text-center">
            <h3 class="text-xl font-bold text-[#860038] mb-3">More Aggression + More Fouls</h3>
            <p class="text-gray-700 text-sm">There is a strong, positive correlation between how often a defense fouls and how many turnovers it forces. This suggests that a more physical, aggressive style of play, even if it leads to a calculated increase in fouls, can disrupt offensive possessions and generate turnovers. While fouls are not a good thing, it can be a trade-off worth conceding in order to force more turnovers.</p>
        </div>
        
        <div class="bg-gray-50 rounded-lg shadow-md p-5 card flex flex-col items-center text-center">
            <h3 class="text-xl font-bold text-[#860038] mb-3">Lean into Weakside Help</h3>
            <p class="text-gray-700 text-sm">The data strongly suggests that the more weakside defenders available, the higher the turnover rate. More deliberate helping off of non-shooters and prioritizing being in a position to double-team or intercept passes would lead to forcing more turnovers.</p>
        </div>

        <div class="bg-gray-50 rounded-lg shadow-md p-5 card flex flex-col items-center text-center">
            <h3 class="text-xl font-bold text-[#860038] mb-3">Mix in Occassional Aggressive P&R Coverages</h3>
            <p class="text-gray-700 text-sm">While blitzes and shows are inefficient in large doses, the model shows they are highly effective at forcing turnovers. We could explore incorporating more on-ball pressure to disrupt the offense early in the possession, or if we want to temporarily change the rhythm of the game.</p>
        </div>
    </div>
</div>

        </main>

        <footer class="text-center mt-12 text-sm text-gray-400">
            <p>League-Wide Turnover Analysis | Data Source: All 2024-25 NBA Turnovers</p>
        </footer>

    </div>

    <script>
        // ... (existing Chart.js script) ...

        const wine = '#860038';
        const gold = '#FDB927';
        const black = '#000000';
        const lightGray = '#E5E7EB';
        const darkGray = '#4B5563';

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            return Array.isArray(label) ? label.join(' ') : label;
        };

        const defaultChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    },
                    backgroundColor: black,
                    titleFont: { size: 14, weight: 'bold' },
                    bodyFont: { size: 12 },
                    padding: 10,
                    cornerRadius: 4,
                    displayColors: false
                }
            },
            scales: {
                x: {
                    ticks: { color: darkGray, font: { weight: '600' } },
                    grid: { display: false },
                    border: { color: lightGray }
                },
                y: {
                    min: 0,
                    ticks: { color: darkGray, font: { weight: '600' } },
                    grid: { color: lightGray, drawBorder: false },
                    border: { display: false }
                }
            }
        };

        new Chart(document.getElementById('turnoverCompositionChart'), {
            type: 'doughnut',
            data: {
                labels: ['Bad Pass', 'Lost Ball', 'Other Turnovers'],
                datasets: [{
                    data: [47, 30, 23],
                    backgroundColor: [wine, black, gold],
                    borderColor: '#ffffff',
                    borderWidth: 4,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%',
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: darkGray,
                            font: { size: 14, weight: '600' }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `${context.label}: ${context.raw.toFixed(2)}%`;
                            }
                        }
                    }
                }
            }
        });

        new Chart(document.getElementById('regionChart'), {
            type: 'bar',
            data: {
                labels: ['Paint', 'Midrange', 'Three', 'Backcourt'],
                datasets: [{
                    label: '% of Turnovers',
                    data: [31, 35, 20, 13],
                    backgroundColor: [wine, black, gold, darkGray],
                    borderRadius: 4
                }]
            },
            options: { ...defaultChartOptions, indexAxis: 'y' }
        });

        new Chart(document.getElementById('timingChart'), {
            type: 'line',
            data: {
                labels: ['12-9 min', '9-6 min', '6-3 min', '3-0 min'],
                datasets: [{
                    label: 'Turnover Frequency',
                    data: [24.1, 25.0, 25.3, 25.6],
                    borderColor: wine,
                    backgroundColor: '#8600384D', // 30% alpha wine
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: wine,
                    pointRadius: 4,
                    pointHoverRadius: 6
                }]
            },
            options: defaultChartOptions
        });

        new Chart(document.getElementById('periodChart'), {
            type: 'bar',
            data: {
                labels: ['Period 1', 'Period 2', 'Period 3', 'Period 4'],
                datasets: [{
                    label: '% of Turnovers',
                    data: [24.7, 26.1, 25.4, 23.8],
                    backgroundColor: [wine, black, gold, darkGray],
                    borderRadius: 4
                }]
            },
            options: {
                ...defaultChartOptions,
                scales: {
                    x: {
                        ...defaultChartOptions.scales.x,
                        offset: true
                    },
                    y: {
                        ...defaultChartOptions.scales.y
                    }
                }
            }
        });

        new Chart(document.getElementById('regionTypeChart'), {
            type: 'bar',
            data: {
                labels: ['Paint', 'Midrange', 'Three', 'Backcourt'],
                datasets: [{
                    label: 'Bad Pass',
                    data: [36, 46, 58, 58],
                    backgroundColor: black
                }, {
                    label: 'Lost Ball',
                    data: [38, 29, 21, 28],
                    backgroundColor: wine
                }, {
                    label: 'Other',
                    data: [26, 25, 21, 14],
                    backgroundColor: gold
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            color: darkGray,
                            font: { weight: '600' }
                        }
                    },
                    tooltip: {
                        backgroundColor: black,
                        titleFont: { size: 14, weight: 'bold' },
                        bodyFont: { size: 12 },
                        padding: 10,
                        cornerRadius: 4,
                        displayColors: true
                    }
                },
                scales: {
                    x: {
                        stacked: true,
                        ticks: { color: darkGray, font: { weight: '600' } },
                        grid: { display: false }
                    },
                    y: {
                        stacked: true,
                        ticks: { color: darkGray, font: { weight: '600' } },
                        grid: { color: lightGray, drawBorder: false },
                        border: { display: false }
                    }
                }
            }
        });

        new Chart(document.getElementById('playBreakdownChart'), {
            type: 'bar',
            data: {
                labels: ['Pick', 'Hand-off', 'Isolation', 'Post-Up'],
                datasets: [{
                    label: 'Bad Pass',
                    data: [47.3, 47.5, 37.6, 35.9],
                    backgroundColor: black
                }, {
                    label: 'Lost Ball',
                    data: [28.2, 27.1, 37.8, 35.4],
                    backgroundColor: wine
                }, {
                    label: 'Other',
                    data: [24.4, 25.4, 24.6, 28.7],
                    backgroundColor: gold
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            color: darkGray,
                            font: { weight: '600' }
                        }
                    },
                    tooltip: {
                        backgroundColor: black,
                        titleFont: { size: 14, weight: 'bold' },
                        bodyFont: { size: 12 },
                        padding: 10,
                        cornerRadius: 4,
                        displayColors: true
                    }
                },
                scales: {
                    x: {
                        stacked: true,
                        ticks: { color: darkGray, font: { weight: '600' } },
                        grid: { display: false }
                    },
                    y: {
                        stacked: true,
                        ticks: { color: darkGray, font: { weight: '600' } },
                        grid: { color: lightGray, drawBorder: false },
                        border: { display: false }
                    }
                }
            }
        });

        new Chart(document.getElementById('playChart'), {
            type: 'bar',
            data: {
                labels: ['Pick', 'Hand-off', 'Isolation', 'Post-Up'],
                datasets: [{
                    label: 'Turnover %',
                    data: [8.4, 8.2, 6.0, 8.3],
                    backgroundColor: [wine, black, gold, darkGray],
                    borderRadius: 4
                }]
            },
            options: {
                ...defaultChartOptions,
                scales: {
                    x: {
                        ...defaultChartOptions.scales.x,
                        offset: true
                    },
                    y: {
                        ...defaultChartOptions.scales.y
                    }
                }
            }
        });

        new Chart(document.getElementById('positionChart'), {
            type: 'bar',
            data: {
                labels: ['Guard' ,'Forward', 'Center'],
                datasets: [{
                    label: 'Turnover % Per Direct Touch',
                    data: [8.0, 8.0, 8.3],
                    backgroundColor: [wine, black, gold],
                    borderRadius: 4
                }]
            },
            options: {
                ...defaultChartOptions,
                scales: {
                    x: {
                        ...defaultChartOptions.scales.x,
                        offset: true
                    },
                    y: {
                        ...defaultChartOptions.scales.y
                    }
                }
            }
        });

        new Chart(document.getElementById('pickCoverageChart'), {
            type: 'bar',
            data: {
                labels: ['Drop', 'Switch', 'Show', 'Blitz'],
                datasets: [{
                    label: 'Turnover %',
                    data: [10.5, 8.5, 13.3, 17.4],
                    backgroundColor: [wine, black, gold, darkGray],
                    borderRadius: 4
                }]
            },
            options: {
                ...defaultChartOptions,
                scales: {
                    x: {
                        ...defaultChartOptions.scales.x,
                        offset: true
                    },
                    y: {
                        ...defaultChartOptions.scales.y
                    }
                }
            }
        });

        new Chart(document.getElementById('weaksideChart'), {
            type: 'bar',
            data: {
                labels: ['0 Weakside Defenders', '1 Defender', '2 Defenders', '3 Defenders'],
                datasets: [{
                    label: 'Turnover %',
                    data: [9.8, 10.3, 11.0, 11.5],
                    backgroundColor: [wine, black, gold, darkGray],
                    borderRadius: 4
                }]
            },
            options: {
                ...defaultChartOptions,
                scales: {
                    x: {
                        ...defaultChartOptions.scales.x,
                        offset: true
                    },
                    y: {
                        ...defaultChartOptions.scales.y
                    }
                }
            }
        });
        
        // NEW CHART FOR REGRESSION RESULTS
        const regressionData = [
            { label: 'Blitzes', value: 0.054282198 },
            { label: 'Dribbles', value: 0.022974821 },
            { label: 'Passes', value: 0.020791753 },
            { label: 'Individual Defender Steal Rates', value: 0.018515680},
            { label: 'Shows', value: 0.012225752 },
            { label: 'Individual Player Turnover Rates', value: 0.008499293}, 
            { label: 'Fullcourt Ball Pressure', value: 0.002561055},
            { label: 'Defense Foul Rate', value: 0.001535636},
            { label: 'Zone', value: -0.013279903 },
            { label: 'Drops', value: -0.014049179},
            { label: 'Handoffs', value: -0.018162362 },
            { label: 'Isolations', value: -0.021611968 },
        ].sort((a, b) => b.value - a.value);

        const regressionLabels = regressionData.map(d => d.label);
        const regressionValues = regressionData.map(d => d.value);
        const barColors = regressionValues.map(val => val > 0 ? wine : gold);

        new Chart(document.getElementById('regressionChart'), {
            type: 'bar',
            data: {
                labels: regressionLabels,
                datasets: [{
                    label: 'Effect on Turnover Likelihood',
                    data: regressionValues,
                    backgroundColor: barColors,
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y', // Make it a horizontal bar chart
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback,
                            label: function(context) {
                                return `Effect: ${context.raw.toFixed(4)}`;
                            }
                        },
                        backgroundColor: black,
                        titleFont: { size: 14, weight: 'bold' },
                        bodyFont: { size: 12 },
                        padding: 10,
                        cornerRadius: 4,
                        displayColors: false
                    }
                },
                scales: {
                    x: {
                        min: -0.03,
                        max: 0.05,
                        ticks: { color: darkGray, font: { weight: '600' } },
                        grid: { color: lightGray, drawBorder: false },
                        border: { display: false }
                    },
                    y: {
                        ticks: { color: darkGray, font: { weight: '600' } },
                        grid: { display: false }
                    }
                }
            }
        });

        // JavaScript for fade-in on scroll
        document.addEventListener('DOMContentLoaded', () => {
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.2 // Trigger when 20% of the element is visible
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target); // Stop observing once it's visible
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.card').forEach(card => {
                observer.observe(card);
            });
        });

    </script>
</body>
</html>
